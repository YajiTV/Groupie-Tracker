<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{.Artist.Artist.Name}}</title>

  <link rel="icon" href="/static/img/favicon.ico?v=1">
  <link rel="stylesheet" href="/static/css/output.css">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    .leaflet-container img { max-width: none !important; }
  </style>
</head>

<body class="min-h-screen bg-linear-to-br from-black via-neutral-700 to-white text-neutral-100">
  <div class="min-h-screen flex items-center justify-center px-4 py-10">
    <div class="max-w-4xl w-full">

      <!-- Retour -->
      <div class="mb-6">
        <a href="/" class="inline-flex items-center gap-2 text-sm text-neutral-200 hover:text-white">
          <span class="text-lg">←</span>
          <span>Retour à la liste des artistes</span>
        </a>
      </div>

      <!-- Carte principale -->
      <div class="bg-linear-to-br from-neutral-900 via-neutral-800 to-neutral-700 rounded-3xl p-8 shadow-2xl">

        <div class="flex flex-col md:flex-row gap-8">
          <!-- Image -->
          <div class="md:w-1/3">
            <img
              src="{{.Artist.Artist.Image}}"
              alt="{{.Artist.Artist.Name}}"
              class="w-full aspect-square object-cover rounded-2xl shadow-lg filter grayscale"
            >
          </div>

          <!-- Infos -->
          <div class="md:w-2/3 flex flex-col justify-between">
            <div>
              <h1 class="text-3xl md:text-4xl font-bold mb-3">{{.Artist.Artist.Name}}</h1>
               <div class="mt-6">
              <a
                href="https://open.spotify.com/search/{{.Artist.Artist.Name | urlquery}}"
                target="_blank"
                class="inline-block px-6 py-3 rounded-full bg-linear-to-r from-neutral-100 to-neutral-400 text-black font-semibold hover:from-white hover:to-neutral-300 shadow-md hover:shadow-xl transition"
              >
                Écouter sur Spotify
              </a>

              <p class="text-neutral-300 mb-2">
                <span class="font-semibold">Premier album :</span> {{.Artist.Artist.FirstAlbum}}
              </p>

              <p class="text-neutral-300 mb-4">
                <span class="font-semibold">Créé en :</span> {{.Artist.Artist.CreationDate}}
              </p>

              <h2 class="text-xl font-semibold text-white mb-2">Membres</h2>
              <ul class="list-disc list-inside space-y-1 text-neutral-200">
                {{range .Artist.Artist.Members}}
                  <li>
                    <a href="https://fr.wikipedia.org/w/index.php?search={{. | urlquery}}"
                       target="_blank"
                       class="hover:underline underline-offset-4">
                      {{.}}
                    </a>
                  </li>
                {{end}}
              </ul>
            </div>
            </div>
          </div>
        </div>

        <!-- MAP -->
        <div class="mt-10">
       <div id="map" data-artist-id="{{.Artist.Artist.ID}}" style="height:420px;"></div>

       <!-- Injection des données locations dans JavaScript -->
       <script>
         window.artistLocations = [
           {{range .Artist.Locations}}
           {
             name: "{{.Name}}",
             dates: [{{range $i, $date := .Dates}}{{if $i}}, {{end}}"{{$date}}"{{end}}]
           },
           {{end}}
         ];
       </script>

<script src="/static/js/map_server.js" defer></script>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
